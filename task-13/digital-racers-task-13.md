# Задание №13 Вариант 2
# Задача о рюкзаке (Knapsack problem). Генетический алгоритм.

## Задание
Для каждого варианта представлены условия задачи, в соответствии с которыми необходимо: 
1. Решить задачу о рюкзаке с применением генетического алгоритма.
2. Оформить решение задачи по шагам с подробными комментариями, таблицами и диаграммами.
3. В ответе указать:
   - максимально возможную стоимость предметов в рюкзаке,
   - набор предметов, обеспечивающих максимальную стоимость,
   - общий вес предметов в рюкзаке,
   - свободное место в рюкзаке.


## Постановка задачи
Для каждого варианта представлены условия задачи, в соответствии с которыми необходимо: 
1. Придумать условия задачи с количеством предметов не менее 8.
2. Численность популяции не менее 6 особей, в скрещивании участвует 1/3 популяции.
3. Для скрещивания выбираются сильнейшие особи, скрещивание – двухточечное.
4. До выполнения алгоритма сформулировать стратегию применения оператора мутации.
5. Сформировать не менее 3 поколений, не считая первоначального.

**Генетический алгоритм не гарантирует получение точного решения, при выполнении задания важно продемонстрировать понимание работы алгоритма, а не получение точного решения.**

## Постановка задачи
Задача о рюкзаке (англ. Knapsack problem) — дано N предметов, n<sub>i</sub> предмет имеет массу w<sub>i</sub> > 0 и стоимость p<sub>i</sub> > 0. Необходимо выбрать из этих предметов такой набор, чтобы суммарная масса не превосходила заданной величины W (вместимость рюкзака), а суммарная стоимость была максимальна. 


Этот процесс продолжается до тех пор, пока не будет достигнут критерий остановки, например, максимальное количество поколений или достижение достаточно хорошего решения.


## Пример решения задачи коммивояжера
## Условия задачи

Вместимость рюкзака: W = 15 кг.

Предметы (8 штук):

|Предмет| Вес (кг) | Стоимость (у.е.) |
|:-----:|:--------:|:----------------:|
|   1	|     3	   |        300       |
|   2	|     2	   |        150       |
|   3	|     1	   |        50        |
|   4	|     2	   |        200       |
|   5	|     4	   |        100       |
|   6	|     3	   |        120       |
|   7	|     5	   |        400       |
|   8	|     2	   |        250       |

## Решение

### Шаг №1 Стратегия мутации

**Вероятность мутации:** 5% на каждый ген.

**Цель:** сохранить разнообразие популяции, избегая преждевременной сходимости к локальным оптимумам.

### Шаг №2 Инициализация популяции

Создаем 6 случайных особей (битовые строки длины 8).
Приспособленность = суммарная стоимость, если вес ≤ 15 кг, иначе 0.

|Особь|	 Бинарное представление  |	Вес (кг)   |	Стоимость (у.е.)    |	Приспособленность  |
|:---:|:------------------------:|:-----------:|:----------------------:|:--------------------:|
|  1  |1 1 0 1 0 1 0 0 (1,2,4,6) |	3+2+2+3=10 | 	300+150+200+120=770	|         770          |
|  2  |	0 0 1 0 1 0 1 1 (3,5,7,8)|	1+4+5+2=12 |	 50+100+400+250=800	|         800          |
|  3  |	1 0 1 1 1 0 0 0 (1,3,4,5)|	3+1+2+4=10 |	300+50+200+100=650	|         650          |
|  4  |	0 1 0 1 0 1 1 0 (2,4,6,7)|	2+2+3+5=12 |	150+200+120+400=870	|         **870**      |
|  5  |	1 0 0 0 1 0 1 1 (1,5,7,8)|	3+4+5+2=14 |	300+100+400+250=1050|	     **1050**      |
|  6  |	0 1 1 0 0 1 0 1 (2,3,6,8)|	2+1+3+2=8  |	150+50+120+250=570	|         570          |

### Шаг №3 Поколение 1

**Отбор родителей:**
Выбираем 1/3 популяции (2 сильнейшие особи):

1. Особь 5 (1050 у.е.)
2. Особь 4 (870 у.е.).

**Скрещивание (двухточечное):**
Точки раздела: после 2-го и 5-го генов.

1. Родитель 1: 1 0 | 0 0 1 | 0 1 1
2. Родитель 2: 0 1 | 0 1 0 | 1 1 0

**Потомки:**

1. Потомок 1: 1 0 0 1 0 1 1 0 -> Вес = 3+2+3+5=13 кг -> Стоимость = 300+150+120+400=970.
2. Потомок 2: 0 1 0 0 1 0 1 1 -> Вес = 2+4+5+2=13 кг -> Стоимость = 150+100+400+250=900.

**Мутация:**

1. Потомок 1: мутация 7-го гена -> 1 0 0 1 0 1 0 0 -> Вес = 3+2+3=8 кг -> Стоимость = 300+150+120=570.
2. Потомок 2: без изменений.

**Новая популяция (заменяем 2 худшие особи: 3 и 6):**

| Особь |	Бинарное представление | Вес |	Стоимость |	Приспособленность |
|:-----:|:------------------------:|:---:|:----------:|:-----------------:|
|   1	|      1 1 0 1 0 1 0 0	   |  10 |	   770	  |       770         |
|   2	|      0 0 1 0 1 0 1 1	   |  12 |	   800	  |       800         |
|   3	|      1 0 0 1 0 1 0 0	   |  8	 |     570	  |       570         |
|   4	|      0 1 0 1 0 1 1 0	   |  12 |	   870	  |       870         |
|   5	|      1 0 0 0 1 0 1 1	   |  14 |	  1050	  |       **1050**    |
|   6	|      0 1 0 0 1 0 1 1	   |  13 |	   900	  |       **900**     |

### Шаг №4 Поколение 2

**Отбор родителей:**

1. Особь 5 (1050 у.е.)
2. Особь 6 (900 у.е.).

**Скрещивание:**

1. Родитель 1: 1 0 0 0 | 1 0 | 1 1
2. Родитель 2: 0 1 0 0 | 1 0 | 1 1

**Потомки:**

1. Потомок 1: 1 0 0 0 1 0 1 1 (копия родителя 5).
2. Потомок 2: 0 1 0 0 1 0 1 1 (копия родителя 6).

**Мутация:**

1. Потомок 1: без изменений.
2. Потомок 2: мутация 3-го гена -> 0 1 1 0 1 0 1 1 -> Вес = 2+1+4+5+2=14 кг -> Стоимость = 150+50+100+400+250=950.

Новая популяция (заменяем особи 3 и 4):

| Особь |	Бинарное представление | Вес |	Стоимость |	Приспособленность |
|:-----:|:------------------------:|:---:|:----------:|:-----------------:|
|   1	|      1 1 0 1 0 1 0 0	   |  10 |	   770	  |       770         |
|   2	|      0 0 1 0 1 0 1 1	   |  12 |	   800	  |       800         |
|   3	|      1 0 0 0 1 0 1 1	   |  14 |     1050	  |       **1050**    |
|   4	|      0 1 1 0 1 0 1 1	   |  14 |	   950	  |       950         |
|   5	|      1 0 0 0 1 0 1 1	   |  14 |	  1050	  |       **1050**    |
|   6	|      0 1 0 0 1 0 1 1	   |  13 |	   900	  |       900         |

### Шаг №5 Поколение 3

**Отбор родителей:**

1. Особь 3 (1050 у.е.)
2. Особь 5 (1050 у.е.).

**Скрещивание:**

Оба родителя идентичны -> потомки будут копиями.

**Мутация:**

1. Потомок 1: мутация 6-го гена -> 1 0 0 0 1 1 1 1 -> Вес = 3+4+5+2=14 кг -> Стоимость = 300+100+400+250=1050.
2. Потомок 2: без изменений.

**Новая популяция:**

| Особь |	Бинарное представление | Вес |	Стоимость |	Приспособленность |
|:-----:|:------------------------:|:---:|:----------:|:-----------------:|
|   1	|      1 1 0 1 0 1 0 0	   |  10 |	   770	  |       770         |
|   2	|      0 0 1 0 1 0 1 1	   |  12 |	   800	  |       800         |
|   3	|      1 0 0 0 1 1 1 1	   |  14 |     1050	  |       **1050**    |
|   4	|      0 1 1 0 1 0 1 1	   |  14 |	   950	  |       950         |
|   5	|      1 0 0 0 1 0 1 1	   |  14 |	  1050	  |       **1050**    |
|   6	|      0 1 0 0 1 0 1 1	   |  13 |	   900	  |       900         |

## Результаты

1. Максимальная стоимость: 1050 у.е.
2. Набор предметов: 1, 5, 7, 8.
3. Общий вес: 3 + 4 + 5 + 2 = 14 кг.
4. Свободное место: 15 - 14 = 1 кг.

## Анализ работы алгоритма

**Оптимальное решение (для проверки):**
Предмет 7 (5 кг, 400) + Предмет 8 (2 кг, 250) + Предмет 4 (2 кг, 200) + Предмет 5 (4 кг, 100) + Предмет 3 (1 кг, 50) = 14 кг, стоимость = 1000 у.е.

Алгоритм сошелся к решению с 1050 у.е., которое близко к оптимальному (1000 у.е. в проверочном примере).

Мутация позволила сохранить разнообразие, но не улучшила результат из-за схожести родителей в последних поколениях.
