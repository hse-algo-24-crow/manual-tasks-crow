# Задание 13. Вариант 10

## Условие задачи

Решить задачу о рюкзаке с применением генетического алгоритма при следующих условиях:
- **Предметы:** 7 предметов, заданных в таблице ниже.
- **Вместимость рюкзака (V):** 15.
- **Численность популяции:** 8 особей.
- **Скрещивание:** В скрещивании участвует половина популяции (4 особи). Для скрещивания выбираются сильнейшие особи (с наибольшим значением фитнес-функции), а сам процесс скрещивания выполняется равномерно.
- **Стратегия мутации:** Перед запуском алгоритма сформулирована следующая стратегия:
  - Если после скрещивания полученные потомки идентичны родительским особям;
  - Если значение фитнес-функции равно 0 (то есть набор предметов превышает вместимость рюкзака);
  - Тогда проводится мутация – случайное изменение одного (или нескольких) генов.
- **Условие завершения:** сформировать не менее 3 поколений, не считая первоначального.

### Таблица исходных данных

| Предметы  |  A  |  B  |  C  |  D  |  E  |  F  |  G  |
|:---------:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| Стоимость | 15  | 10  | 20  | 8   | 12  | 9   | 7   |
| Вес       | 5   | 4   | 6   | 3   | 4   | 2   | 3   |

*Замечание:* Если суммарный вес выбранных предметов > 15, фитнес = 0, иначе фитнес = сумма стоимостей выбранных предметов.

---

## Решение

### Поколение 1 (Инициализация)

Генерируем 8 особей случайным образом (кодировка – 7 бит, по одному на каждый предмет):

| Особь | A | B | C | D | E | F | G | f(x)                    | Вес        |
|:-----:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-----------------------:|:----------:|
| x1    | 1 | 0 | 0 | 1 | 0 | 0 | 0 | 15 + 8 = **23**         | 5 + 3 = **8**  |
| x2    | 0 | 1 | 1 | 1 | 0 | 0 | 0 | 10 + 20 + 8 = **38**    | 4 + 6 + 3 = **13** |
| x3    | 1 | 1 | 0 | 0 | 1 | 0 | 0 | 15 + 10 + 12 = **37**   | 5 + 4 + 4 = **13** |
| x4    | 0 | 0 | 1 | 0 | 1 | 1 | 0 | 20 + 12 + 9 = **41**    | 6 + 4 + 2 = **12** |
| x5    | 1 | 0 | 1 | 1 | 0 | 0 | 0 | 15 + 20 + 8 = **43**    | 5 + 6 + 3 = **14** |
| x6    | 0 | 1 | 1 | 0 | 0 | 1 | 0 | 10 + 20 + 9 = **39**    | 4 + 6 + 2 = **12** |
| x7    | 0 | 1 | 0 | 1 | 0 | 1 | 1 | 10 + 8 + 9 + 7 = **34** | 4 + 3 + 2 + 3 = **12** |
| x8    | 1 | 0 | 0 | 0 | 1 | 0 | 1 | 15 + 12 + 7 = **34**    | 5 + 4 + 3 = **12** |

**Отбор для скрещивания:** Выбираем 4 сильнейшие особи по фитнесу:  
x5 (43), x4 (41), x6 (39) и x2 (38).

---

### Поколение 2

#### Скрещивание пар

**Пара 1:** Особи **x5** и **x4**

*Родительские хромосомы:*
- x5: **1 0 1 1 0 0 0**
- x4: **0 0 1 0 1 1 0**

Генерируем случайную маску **z**:

| Предметы | A | B | C | D | E | F | G |
|:--------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| x4       | 0 | 0 | 1 | 0 | 1 | 1 | 0 |
| x5       | 1 | 0 | 1 | 1 | 0 | 0 | 0 |
| z        | 0 | 1 | 0 | 1 | 0 | 1 | 0 |

**Формирование потомков:**

- **Потомок x9 (первый):**  
  Берём гены от x5 там, где z = 1, а остальные от x4:
  - A: z=0 → из x4: 0  
  - B: z=1 → из x5: 0  
  - C: z=0 → из x4: 1  
  - D: z=1 → из x5: 1  
  - E: z=0 → из x4: 1  
  - F: z=1 → из x5: 0  
  - G: z=0 → из x4: 0  
  **x9 = "0 0 1 1 1 0 0"**  
  Вес = C (6) + D (3) + E (4) = **13**  
  Фитнес = 20 + 8 + 12 = **40**

- **Потомок x10 (второй):**  
  Противоположное правило: берём гены от x4 там, где z = 1, а от x5, где z = 0:
  - A: z=0 → из x5: 1  
  - B: z=1 → из x4: 0  
  - C: z=0 → из x5: 1  
  - D: z=1 → из x4: 0  
  - E: z=0 → из x5: 0  
  - F: z=1 → из x4: 1  
  - G: z=0 → из x5: 0  
  **x10 = "1 0 1 0 0 1 0"**  
  Вес = A (5) + C (6) + F (2) = **13**  
  Фитнес = 15 + 20 + 9 = **44**

*Проверка мутации:*  
Если полученные потомки оказались идентичными родительским или имеют фитнес = 0, выполняется мутация. В данном случае x9 и x10 отличаются от родителей и имеют положительный фитнес, поэтому мутация не применяется.

---

**Пара 2:** Особи **x6** и **x2**

*Родительские хромосомы:*
- x6: **0 1 1 0 0 1 0**
- x2: **0 1 1 1 0 0 0**

Генерируем случайную маску **z**:

| Предметы | A | B | C | D | E | F | G |
|:--------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| x2       | 0 | 1 | 1 | 1 | 0 | 0 | 0 |
| x6       | 0 | 1 | 1 | 0 | 0 | 1 | 0 |
| z        | 1 | 0 | 1 | 0 | 1 | 0 | 1 |

**Формирование потомков:**

- **Потомок x11 (первый):**  
  Берём гены от x6 там, где z = 1, а от x2, где z = 0:
  - A: z=1 → из x6: 0  
  - B: z=0 → из x2: 1  
  - C: z=1 → из x6: 1  
  - D: z=0 → из x2: 1  
  - E: z=1 → из x6: 0  
  - F: z=0 → из x2: 0  
  - G: z=1 → из x6: 0  
  **x11 = "0 1 1 1 0 0 0"**  
  Вес = B (4) + C (6) + D (3) = **13**  
  Фитнес = 10 + 20 + 8 = **38**

- **Потомок x12 (второй):**  
  Противоположное правило: берём гены от x2 там, где z = 1, а от x6, где z = 0:
  - A: z=1 → из x2: 0  
  - B: z=0 → из x6: 1  
  - C: z=1 → из x2: 1  
  - D: z=0 → из x6: 0  
  - E: z=1 → из x2: 0  
  - F: z=0 → из x6: 1  
  - G: z=1 → из x2: 0  
  **x12 = "0 1 1 0 0 1 0"**  
  Вес = B (4) + C (6) + F (2) = **12**  
  Фитнес = 10 + 20 + 9 = **39**

*Проверка мутации:*  
Потомки x11 и x12 удовлетворяют условиям, поэтому мутация не применяется.

**Формирование поколения 2:**  
Новая популяция поколения 2 состоит из:
- Родительские особи: x5, x4, x6, x2  
- Полученные потомки: x9, x10, x11, x12

Таблица поколения 2:

| Особь | Кодировка      | f(x) | Вес  |
|:-----:|:--------------:|:----:|:----:|
| x5    | 1 0 1 1 0 0 0  | 43   | 14   |
| x4    | 0 0 1 0 1 1 0  | 41   | 12   |
| x6    | 0 1 1 0 0 1 0  | 39   | 12   |
| x2    | 0 1 1 1 0 0 0  | 38   | 13   |
| x9    | 0 0 1 1 1 0 0  | 40   | 13   |
| x10   | 1 0 1 0 0 1 0  | 44   | 13   |
| x11   | 0 1 1 1 0 0 0  | 38   | 13   |
| x12   | 0 1 1 0 0 1 0  | 39   | 12   |

Для дальнейшего скрещивания выбираем 4 сильнейшие особи: x10 (44), x5 (43), x4 (41) и x9 (40).

---

### Поколение 3

#### Скрещивание пар

**Пара 1:** Особи **x10** и **x5**

*Родительские хромосомы:*
- x10: **1 0 1 0 0 1 0**
- x5:  **1 0 1 1 0 0 0**

Генерируем случайную маску **z**:

| Предметы | A | B | C | D | E | F | G |
|:--------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| x10      | 1 | 0 | 1 | 0 | 0 | 1 | 0 |
| x5       | 1 | 0 | 1 | 1 | 0 | 0 | 0 |
| z        | 1 | 0 | 0 | 1 | 0 | 1 | 0 |

**Формирование потомков:**

- **Потомок x13 (первый):**  
  Берём гены от x10 там, где z = 1, а от x5, где z = 0:
  - A: (z=1) → x10: 1  
  - B: (z=0) → x5: 0  
  - C: (z=0) → x5: 1  
  - D: (z=1) → x10: 0  
  - E: (z=0) → x5: 0  
  - F: (z=1) → x10: 1  
  - G: (z=0) → x5: 0  
  **x13 = "1 0 1 0 0 1 0"**  
  Это совпадает с x10, поэтому по стратегии мутации (если потомок идентичен родителям) проводим мутацию – случайно изменим один ген, например, 3-й ген (1 → 0).  
  Мутированный **x13 = "1 0 0 0 0 1 0"**  
  Вес = A (5) + D (3) + F (2) = **10**  
  Фитнес = 15 + 8 + 9 = **32**

- **Потомок x14 (второй):**  
  Противоположное правило: берём гены от x5 там, где z = 1, а от x10 там, где z = 0:
  - A: (z=1) → x5: 1  
  - B: (z=0) → x10: 0  
  - C: (z=0) → x10: 1  
  - D: (z=1) → x5: 1  
  - E: (z=0) → x10: 0  
  - F: (z=1) → x5: 0  
  - G: (z=0) → x10: 0  
  **x14 = "1 0 1 1 0 0 0"**  
  Это совпадает с x5, поэтому проводим мутацию – изменим 4-й ген (1 → 0).  
  Мутированный **x14 = "1 0 1 0 0 0 0"**  
  Вес = A (5) + C (6) = **11**  
  Фитнес = 15 + 20 = **35**

**Пара 2:** Особи **x4** и **x9**

*Родительские хромосомы:*
- x4: **0 0 1 0 1 1 0**
- x9: **0 0 1 1 1 0 0**

Генерируем случайную маску **z**:

| Предметы | A | B | C | D | E | F | G |
|:--------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| x4       | 0 | 0 | 1 | 0 | 1 | 1 | 0 |
| x9       | 0 | 0 | 1 | 1 | 1 | 0 | 0 |
| z        | 0 | 1 | 0 | 1 | 0 | 1 | 0 |

**Формирование потомков:**

- **Потомок x15 (первый):**  
  Берём гены от x6 там, где z = 1, а от x4, где z = 0:
  - A: (z=0) → x4: 0  
  - B: (z=1) → x9: 0  
  - C: (z=0) → x4: 1  
  - D: (z=1) → x9: 1  
  - E: (z=0) → x4: 1  
  - F: (z=1) → x9: 0  
  - G: (z=0) → x4: 0  
  **x15 = "0 0 1 1 1 0 0"**
  Это совпадает с x9, поэтому проводим мутацию – изменим 4-й ген (1 → 0).
  Мутированный **x15 = "0 0 1 0 1 0 0"**
  Вес = C (6) + E (4)  = **10**
  Фитнес = 20 + 8 = 28

- **Потомок x16 (второй):**  
  Противоположное правило: берём гены от x4 там, где z = 1, а от x9 там, где z = 0:
  - A: (z=0) → x9: 0  
  - B: (z=1) → x4: 0  
  - C: (z=0) → x9: 1  
  - D: (z=1) → x4: 0  
  - E: (z=0) → x9: 1  
  - F: (z=1) → x4: 1  
  - G: (z=0) → x9: 0  
  **x16 = "0 0 1 0 1 1 0"**
  Это совпадает с x4, поэтому проводим мутацию – изменим 4-й ген (0 → 1).
  Мутированный **x16 = "0 0 1 1 1 1 0"**  
  Вес = C (6) + D(3) + E(4) + F (2) = **15**  
  Фитнес = 20 + 8 + 12 + 9 = **49**

**Формирование поколения 3:**  
Новая популяция поколения 3 состоит из:
- Родительские особи (для скрещивания): x10, x5, x4, x9  
- Потомки: x13, x14, x15, x16

| Особь | Кодировка      | f(x) | Вес |
|:-----:|:--------------:|:----:|:---:|
| x10   | 1 0 1 0 0 1 0  | 44   | 13  |
| x5    | 1 0 1 1 0 0 0  | 43   | 14  |
| x4    | 0 0 1 0 1 1 0  | 41   | 12  |
| x9    | 0 0 1 1 1 0 0  | 40   | 13  |
| x13   | 1 0 0 0 0 1 0  | 32   | 10  |
| x14   | 1 0 1 0 0 0 0  | 35   | 11  |
| x15   | 0 0 1 0 1 0 0  | 28   | 10  |
| x16   | 0 0 1 1 1 1 0  | 49   | 15  |

Для дальнейшего скрещивания снова выбираем 4 сильнейшие особи: x16 (49), x10 (44), x5 (43), x4 (41).

---

### Поколение 4 (Финальное поколение)

#### Скрещивание пар

**Пара 1:** Особи **x16** и **x10**

*Родительские хромосомы:*
- x10: **1 0 1 0 0 1 0**
- x16:  **0 0 1 1 1 1 0**

Генерируем случайную маску **z**:

| Предметы | A | B | C | D | E | F | G |
|:--------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| x10      | 1 | 0 | 1 | 0 | 0 | 1 | 0 |
| x16      | 0 | 0 | 1 | 1 | 1 | 1 | 0 |
| z        | 0 | 1 | 0 | 1 | 0 | 1 | 0 |

**Формирование потомков:**

- **Потомок x17 (первый):**  
  Берём гены от x10 там, где z = 1, а от x16, где z = 0:
  - A: (z=0) → x16: 0  
  - B: (z=1) → x10: 0  
  - C: (z=0) → x16: 1  
  - D: (z=1) → x10: 0  
  - E: (z=0) → x16: 1
  - F: (z=1) → x10: 1  
  - G: (z=0) → x16: 0  
  **x17 = "0 0 1 0 1 1 0"**  
  Вес = C (6) + E(4) + F (2) = **12**  
  Фитнес = 20 + 12 + 9 = **41**

- **Потомок x18 (второй):**  
  Противоположное правило: берём гены от x16 там, где z = 1, а от x10 там, где z = 0:
  - A: (z=0) → x10: 1  
  - B: (z=1) → x16: 0  
  - C: (z=0) → x10: 1  
  - D: (z=1) → x16: 1  
  - E: (z=0) → x10: 0  
  - F: (z=1) → x16: 1  
  - G: (z=0) → x10: 0  
  **x18 = "1 0 1 1 0 1 0"**  
  Вес = A (5) + C (6) + D(3) + F(2) = **16** (превышает вместимость)
  Фитнес = 0  
  Применяем мутацию – изменим, например, 4-й ген (1 → 0):
  Мутированный **x18 = "1 0 0 1 0 1 0"**
  Вес = A (5) + C (6) + F(2) = **13**
  Фитнес = 15 + 20 + 9 = 44  

**Пара 2:** Особи **x4** и **x5**

*Родительские хромосомы:*
- x4: **0 0 1 0 1 1 0**
- x5: **0 1 1 0 0 1 0**

Генерируем случайную маску **z**:

| Предметы | A | B | C | D | E | F | G |
|:--------:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| x4       | 0 | 0 | 1 | 0 | 1 | 1 | 0 |
| x5       | 1 | 0 | 1 | 1 | 0 | 0 | 0 |
| z        | 1 | 0 | 1 | 0 | 1 | 0 | 1 |

**Формирование потомков:**

- **Потомок x19 (первый):**  
  Берём гены от x5 там, где z = 1, а от x4 там, где z = 0:
  - A: (z=1) → x5: 1  
  - B: (z=0) → x4: 0  
  - C: (z=1) → x5: 1  
  - D: (z=0) → x4: 0  
  - E: (z=1) → x5: 0  
  - F: (z=0) → x4: 1  
  - G: (z=1) → x5: 0  
  **x19 = "1 0 1 0 0 1 0"**  
  Вес = A(5) + C (6) + F (2) = **13**  
  Фитнес = 15 + 20 + 9 = **44**

- **Потомок x20 (второй):**  
  Противоположное правило: берём гены от x4 там, где z = 1, а от x5 там, где z = 0:
  - A: (z=1) → x4: 0  
  - B: (z=0) → x5: 0  
  - C: (z=1) → x4: 1  
  - D: (z=0) → x5: 1  
  - E: (z=1) → x4: 1  
  - F: (z=0) → x5: 0  
  - G: (z=1) → x4: 0  
  **x20 = "0 0 1 1 1 0 0"**  
  Вес = C (6) + D(3) + E (4) = **13**
  Фитнес = 20 + 8 + 12 = **40**  

**Формирование поколения 4:**  
Новая популяция поколения 4 состоит из:
- Родительские особи (из предыдущего отбора): x10, x5, x4, x16  
- Потомки: x17, x18, x19, x20

| Особь | Кодировка      | f(x) | Вес |
|:-----:|:--------------:|:----:|:---:|
| x10   | 1 0 1 0 0 1 0  | 44   | 13  |
| x16   | 0 0 1 1 1 1 0  | 49   | 15  |
| x4    | 0 0 1 0 1 1 0  | 41   | 12  |
| x6    | 0 1 1 0 0 1 0  | 39   | 12  |
| x17   | 0 0 1 0 1 1 0  | 41   | 12  |
| x18   | 1 0 0 1 0 1 0  | 44   | 13  |
| x19   | 1 0 1 0 0 1 0  | 44   | 13  |
| x20   | 0 0 1 1 1 0 0  | 40   | 13  |

**Отбор итогового решения:**  
Из поколения 4 лучшей является особь **x16** с фитнесом **49**.

**Интерпретация x16 ("0 0 1 1 1 1 0"):**
- A = 0 → не выбран
- B = 0 → не выбран
- C = 1 → выбран (стоимость 20, вес 6)
- D = 1 → выбран (стоимость 8, вес 3)
- E = 1 → выбран (стоимость 12, вес 4)
- F = 1 → выбран (стоимость 9, вес 2)
- G = 0 → не выбран

Подсчёт:
- **Общий вес:** 6 + 3 + 4 + 2 = **15** (свободное место = 0)
- **Общая стоимость:** 20 + 8 + 12 + 9 = **49**

---

## Итоговый ответ

- **Максимально возможная стоимость предметов в рюкзаке:** 49  
- **Набор предметов, обеспечивающих максимальную стоимость:** {C, D, E, F}  
- **Общий вес предметов в рюкзаке:** 15  
- **Свободное место в рюкзаке:** 0

---
