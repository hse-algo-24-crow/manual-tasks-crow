# Задание №13. Задача о рюкзаке (Knapsack problem). Генетический алгоритм.
## Вариант 8
## Условия задачи
   - Количество предметов - 9.
   - Численность популяции - 4 особи, в скрещивании участвует половина популяции. 
   - Для скрещивания выбираются победители турнира, скрещивание – одноточечное.
   - Сформировать 3 поколения, не считая первоначального.

Данные о вещах, их весе и стоимости представлены в таблице:

| Вещи      | A  | B  | C  | D  | E  | F  | G  | H  | I  |
|:----------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Вес       | 4  | 5  | 1  | 5  | 7  | 3  | 6  | 8  | 4  |
| Стоимость | 10 | 15 | 20 | 12 | 30 | 12 | 25 | 8  | 5  |


Вместимость рюкзака - 25

Численность популяции - 4 особи

## Решение ##

### 1. Поколение 1 ###

Сформируем случайным образом первое поколение: 

|    x<sub>i</sub>          | Вес  | f(x) |
|:-------------------------:|:----:|:----:|
|x<sub>1</sub> = (110101001)|  21  |  54  |
|x<sub>2</sub> = (000110000)|  12  |  42  |
|x<sub>3</sub> = (101100001)|  14  |  47  |
|x<sub>4</sub> = (101110100)|  23  |  97  |

f(x) - фитнес-функция, определяющая приспособленность особи. Она равна суммарной стоимости взятых предметов (при условии, что вес не превышает максимальнго допустимый)

Турнир: **x<sub>1</sub>** против **x<sub>3</sub>**; **x<sub>2</sub>** против **x<sub>4</sub>**

Победители: **x<sub>1</sub>** и **x<sub>4</sub>**

В результате одноточечного скрещивания (граница разграничения - 3, выбрана случайным образом), получаются следующие потомки:

|    Родители                   | Вес  | f(x) |
|:-----------------------------:|:----:|:----:|
|x<sub>1</sub> = (**110101001**)|  21  |  54  |
|x<sub>4</sub> = (101110100)    |  23  |  97  |


|    Потомки                     | Вес  | f(x) |
|:------------------------------:|:----:|:----:|
|x<sub>5</sub> = (**110**110100) |  <span style="color:red">27</span>  |  92  |
|x<sub>6</sub> = (101**101001**) |  17  |  59  |

Особь **x<sub>5</sub>** нежизнеспособна из-за превышения веса. Применим мутацию

Случайную единицу (3-ю слева) обратим в 0:

|    Потомки                     | Вес  | f(x) |
|:------------------------------:|:----:|:----:|
|x<sub>5</sub> = (110**0**10100) |  **22**  |  **80**  |
|x<sub>6</sub> = (101101001) |  17  |  59  |

В дальнейших мутациях нет необходимости.

### 2. Поколение 2 ###

|    x<sub>i</sub>           | Вес  | f(x) |
|:--------------------------:|:----:|:----:|
|x<sub>1</sub> = (110101001) |  21  |  54  |
|x<sub>4</sub> = (101110100) |  23  |  97  |
|x<sub>5</sub> = (110010100) |  22  |  80  |
|x<sub>6</sub> = (101101001) |  17  |  59  |

Турнир: **x<sub>1</sub>** против **x<sub>4</sub>**; **x<sub>5</sub>** против **x<sub>6</sub>**

Победители: **x<sub>4</sub>** и **x<sub>5</sub>**

В результате одноточечного скрещивания (граница разграничения - 5, выбрана случайным образом), получаются следующие потомки:

|    Родители                   | Вес  | f(x) |
|:-----------------------------:|:----:|:----:|
|x<sub>4</sub> = (**101110100**)|  23  |  97  |
|x<sub>5</sub> = (110010100)    |  22  |  80  |

|    Потомки                     | Вес  | f(x) |
|:------------------------------:|:----:|:----:|
|x<sub>7</sub> = (**10111**0100) |  23  |  97  |
|x<sub>8</sub> = (11001**0100**) |  22  |  80  |

Особь **x<sub>7</sub>** совпадает с родительской **x<sub>4</sub>**. Применим мутацию

Случайную бит (1-й слева) обратим в противоположный:

|    Потомки                     | Вес  | f(x) |
|:------------------------------:|:----:|:----:|
|x<sub>7</sub> = (**0**01110100) |  **19**  |  **87**  |
|x<sub>8</sub> = (110010100)     |  22  |  80  |

В дальнейших мутациях нет необходимости.

### 3. Поколение 3 ###

|    x<sub>i</sub>           | Вес  | f(x) |
|:--------------------------:|:----:|:----:|
|x<sub>4</sub> = (101110100) |  23  |  97  |
|x<sub>5</sub> = (110010100) |  22  |  80  |
|x<sub>7</sub> = (001110100) |  19  |  87  |
|x<sub>8</sub> = (110010100) |  22  |  80  |

Турнир: **x<sub>4</sub>** против **x<sub>8</sub>**; **x<sub>5</sub>** против **x<sub>7</sub>**

Победители: **x<sub>4</sub>** и **x<sub>7</sub>**

В результате одноточечного скрещивания (граница разграничения - 4, выбрана случайным образом), получаются следующие потомки:

|    Родители                   | Вес  | f(x) |
|:-----------------------------:|:----:|:----:|
|x<sub>4</sub> = (**101110100**)|  23  |  97  |
|x<sub>7</sub> = (001110100)    |  19  |  87  |

|    Потомки                      | Вес  | f(x) |
|:-------------------------------:|:----:|:----:|
|x<sub>9</sub> = (**1011**10100)  |  23  |  97  |
|x<sub>10</sub> = (0011**10100**) |  19  |  87  |

Особи **x<sub>9</sub>** и **x<sub>10</sub>** совпадают с родительскими **x<sub>4</sub>** и **x<sub>7</sub>** соответственно. Применим мутацию

Случайную бит (5-й/9-й слева) обратим в противоположный:

|    Потомки                     | Вес  | f(x) |
|:------------------------------:|:----:|:----:|
|x<sub>9</sub> = (1011**0**0100) |  **16** |  **67**  |
|x<sub>10</sub> = (00111010**1**) |  **23**  |  **92**  |

В дальнейших мутациях нет необходимости.


### 4. Итоговое поколение ###

|    x<sub>i</sub>           | Вес  | f(x) |
|:--------------------------:|:----:|:----:|
|x<sub>4</sub> = (101110100) |  23  |  97  |
|x<sub>7</sub> = (001110100) |  19  |  87  |
|x<sub>9</sub> = (101100100) |  16  |  67  |
|x<sub>10</sub> = (001110101)|  23  |  92  |

Было сформировано 3 поколения, не считая изначального, следовательно, работу алгоритма завершаем.

Сильнейшая особь в итоговом поколении - x<sub>4</sub> с суммарным весом = 23 и f(x) = 97

**Ответ: Для максимизации стоимости взятых в рюкзак предметов, нужно взять предметы {A, C, D, E, G}, общий вес предметов = 23, суммарная стоимость = 97. Свободное место в рюкзаке = 2.**