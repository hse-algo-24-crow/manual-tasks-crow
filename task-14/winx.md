### Вариант 7:
Генетический алгоритм для задачи коммивояжера.

1. Сгенерировать 2 особи (случайных решения) в виде перестановки номеров городов, которая всегда начинается с единицы.
2. Рассчитать фитнес-функцию для особей.
3. Закодировать их с применением альтернативной кодировки с пошаговыми комментариями.
4. Провести двухточечное скрещивание особей с пошаговыми комментариями, получить два потомка.
5. Провести мутацию одного из потомков с пошаговыми комментариями.
6. Декодировать альтернативную кодировку потомков в натуральную кодировку с пошаговыми комментариями.
7. Рассчитать фитнес-функцию для потомков.

**Матрица расстояний:**

|       | **1** | **2** | **3** | **4** | **5** |
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **1** | **∞** |   5   |   13  |  5    |   7   |
| **2** |   12  | **∞** |   15  |  6    |   11  |
| **3** |   12  |   6   | **∞** |  5    |   12  |
| **4** |   9   |   14  |   8   | **∞** |   13  |
| **5** |   6   |   7   |   11  |  15   | **∞** |

**1.** Сгенерируем 2 особи (случайным образом) в виде перестановки номеров городов, которая всегда начинается с единицы. Получим:

| Особь  |       |
|:-------|:-----:|
| **x1** | 13542 |
| **x2** | 14523 |

**2.** Рассчитаем фитнес-функции для особей x1 и x2.

f(x1) = 13 + 12 + 15 + 14 + 12 = 66
f(x2) =5 + 13 + 7 + 15 + 12 = 52

**3.** Закодируем особи x1 и x2 с применением альтернативной кодировки:

Для каждого числа в натуральном коде находим его номер в возрастающей перестановке и добавляем этот номер в альтернативный код. Затем удаляем это число из натурального кода и проделываем все этапы заново пока не дойдем до последнего числа.

Натуральный код особи x1: 13542

| x1                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| натуральный код                  | 1 | 3 | 5 | 4 | 2 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Альтернативный код: 1

| x1                               |   |   |   |   |  
|----------------------------------|---|---|---|---|
| натуральный код                  | 3 | 5 | 4 | 2 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Альтернативный код: 12

| x1                               |   |   |   |  
|----------------------------------|---|---|---|
| натуральный код                  | 5 | 4 | 2 |
| возрастающая перестановка        | 2 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 |

Альтернативный код: 123

| x1                               |   |   |    
|----------------------------------|---|---|
| натуральный код                  | 4 | 2 |
| возрастающая перестановка        | 2 | 4 |
| номера возрастающей перестановки | 1 | 2 |

Альтернативный код: 1232

| x1                               |    |  
|----------------------------------|----|
| натуральный код                  | 2  |
| возрастающая перестановка        | 2  |
| номера возрастающей перестановки | 1  |

Альтернативный код особи x1: 12321


Проделаем то же самое для особи x2:

Натуральный код особи x2: 14523

| x2                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| натуральный код                  | 1 | 4 | 5 | 2 | 3 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Альтернативный код: 1

| x2                               |   |   |   |   |  
|----------------------------------|---|---|---|---|
| натуральный код                  | 4 | 5 | 2 | 3 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Альтернативный код: 13

| x2                               |   |   |   |  
|----------------------------------|---|---|---|
| натуральный код                  | 5 | 2 | 3 |
| возрастающая перестановка        | 2 | 3 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 |

Альтернативный код: 133

| x2                               |   |   |    
|----------------------------------|---|---|
| натуральный код                  | 2 | 3 |
| возрастающая перестановка        | 2 | 3 |
| номера возрастающей перестановки | 1 | 2 |

Альтернативный код: 1331

| x2                               |    |  
|----------------------------------|----|
| натуральный код                  | 3  |
| возрастающая перестановка        | 3  |
| номера возрастающей перестановки | 1  |

Альтернативный код особи x2: 13311


**4.** Проведем двухточечное скрещивание особей, чтобы получить два потомка.

Двухточечное скрещивание — это метод скрещивания, при котором родительские хромосомы обмениваются участком генетического кода, который находится между двумя случайно выбранными точками скрещивания.

Случайно выберем точки скрещивания:

x1 = 12|32|1

x2 = 13|31|1

Получим двух потомков:

x3 = 12311

x4 = 13321

**5.** Проведем мутацию одного из потомков.

Возмем потомка x3. Случайным образом заменим один из разряов, например, второй разряд: диапазон значений для разряда определяется по формуле [1, n-i+1], где i - разряд, а n - кол-во разрядов. Для второго разряда диапазон [1, 4]. Получим: 

x3 = 1**4**311

**6.** Декодируем альтернативную кодировку потомков в натуральную кодировку.

Проведем декодирование для x3 потомка:

Альтернативный код: 14311

| x3                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| альтернативный код               | 1 | 4 | 3 | 1 | 1 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Натуральный код: 1

| x3                               |   |   |   |   |
|----------------------------------|---|---|---|---|
| альтернативный код               | 4 | 3 | 1 | 1 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Натуральный код: 15

| x3                               |   |   |    | 
|----------------------------------|---|---|----|
| альтернативный код               | 3 | 1 | 1  |
| возрастающая перестановка        | 2 | 3 | 4  |
| номера возрастающей перестановки | 1 | 2 | 3  |

Натуральный код: 154

| x3                               |     |   |
|----------------------------------|-----|---|
| альтернативный код               | 1   | 1 |
| возрастающая перестановка        | 2   | 3 |
| номера возрастающей перестановки | 1   | 2 |
Натуральный код: 1542

| x3                               |    | 
|----------------------------------|----|
| альтернативный код               | 1  |
| возрастающая перестановка        | 3  |
| номера возрастающей перестановки | 1  |

Натуральный код: 15423

Проведем декодирование для x4 потомка:

Альтернативный код: 13321

| x4                               |   |   |   |   |   |
|----------------------------------|---|---|---|---|---|
| альтернативный код               | 1 | 3 | 3 | 2 | 1 |
| возрастающая перестановка        | 1 | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 | 5 |

Натуральный код: 1

| x4                               |   |   |   |   |
|----------------------------------|---|---|---|---|
| альтернативный код               | 3 | 3 | 2 | 1 |
| возрастающая перестановка        | 2 | 3 | 4 | 5 |
| номера возрастающей перестановки | 1 | 2 | 3 | 4 |

Натуральный код: 14

| x4                               |   |   |    | 
|----------------------------------|---|---|----|
| альтернативный код               | 3 | 2 | 1  |
| возрастающая перестановка        | 2 | 3 | 5  |
| номера возрастающей перестановки | 1 | 2 | 3  |

Натуральный код: 145

| x4                               |     |   |
|----------------------------------|-----|---|
| альтернативный код               | 2   | 1 |
| возрастающая перестановка        | 2   | 3 |
| номера возрастающей перестановки | 1   | 2 |

Натуральный код: 1453

| x4                               |    | 
|----------------------------------|----|
| альтернативный код               | 1  |
| возрастающая перестановка        | 2  |
| номера возрастающей перестановки | 1  |

Натуральный код: 14532

**7.** Рассчитаем фитнес-функции для потомков х3 и х4.

f(x3) = 7 + 15 + 14 + 15 + 12 = **63**

f(x4) = 5 + 13 + 11 + 6 + 12 = **47**