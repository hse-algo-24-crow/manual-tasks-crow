# Задание №11 Вариант 2
# Задача о рюкзаке (Knapsack problem). Метод ветвей и границ.

## Задание
Для каждого варианта представлены условия задачи, в соответствии с которыми необходимо: 
1. Решить задачу о рюкзаке с применением метода ветвей и границ.
2. Оформить решение задачи по шагам с подробными комментариями, таблицами и диаграммами.
3. В ответе указать:
- максимально возможную стоимость предметов в рюкзаке,
- набор предметов, обеспечивающих максимальную стоимость,
- общий вес предметов в рюкзаке,
- свободное место в рюкзаке.

## Постановка задачи
Задача о рюкзаке (англ. Knapsack problem) — дано N предметов, n<sub>i</sub> предмет имеет массу w<sub>i</sub> > 0 и стоимость p<sub>i</sub> > 0. Необходимо выбрать из этих предметов такой набор, чтобы суммарная масса не превосходила заданной величины W (вместимость рюкзака), а суммарная стоимость была максимальна. 

## Пример решения задачи о рюкзаке
## Условия задачи

| Предметы  | A | B  |  C  | D | E | F |
|:----------|:-:|:--:|:---:|:-:|:-:|:-:|
| Стоимость | 5 | 5  |  3  | 8 | 6 | 8 |
| Вес       | 5 | 10 | 12  | 2 | 2 | 4 |

Ограничение вместимости: 22

## Решение
### 1. Рассчитаем ценность каждого предмета
| Предметы  | A | B  |  C  | D | E | F |
|:----------|:-:|:--:|:---:|:-:|:-:|:-:|
| Стоимость | 5 | 5  |  3  | 8 | 6 | 8 |
| Вес       | 5 | 10 | 12  | 2 | 2 | 4 |
| Ценность  | 1 | 1/2| 1/4 | 4 | 3 | 2 |

### 2. Отсортируем предметы по убыванию ценности
| Предметы  | D | E  |  F  | A |  B  |  C  |
|:----------|:-:|:--:|:---:|:-:|:---:|:---:|
| Стоимость | 8 |  6 |  8  | 5 |  5  |  3  |
| Вес       | 2 |  2 |  4  | 5 |  10 |  12 |
| Ценность  | 4 |  3 |  2  | 1 | 1/2 | 1/4 |

### 3. Рассчитаем оценку сверху для пустого рюкзака

Свободное место в рюкзаке: 22

Наибольшая ценность предмета: 4

Оценка сверху для пустого рюкзака: 22 * 4 = 88


### 4. Найдем решение задачи с использованием метода ветвей и границ

```mermaid
graph TB
    1(#1\nW=0, V=0\nU=88 = 22*4) -->|+D| 2(#2\nW=2, V=8\nU=68 = 8 + 20*3)
    1 -->|-D| 3(#3\nW=0, V=0\nU=66 = 22*3)

    2 -->|+E| 4(#4\nW=4, V=14\nU=50 = 14 + 18*2)
    2 -->|-E| 5(#5\nW=2, V=8\nU=48 = 8 + 20*2)

    4 -->|+F| 6(#6\nW=8, V=22\nU=36 = 22 + 14*1)
    4 -->|-F| 7(#7\nW=4, V=14\nU=32 = 14 + 18*1)
    
    6 -->|+A| 8(#8\nW=13, V=27\nU=31.5 = 27 + 9*0.5)
    6 -->|-A| 9(#9\nW=8, V=22\nU=29 = 22 + 14*0.5)

    8 -->|+B| 10(#10\nW=23, V=32\nU=31.75 = 32 + -1*0.25)
    10 -->|+C| 11(#11\nU=31.25 = 32 + 22-25*0.25)
    10 -->|-C| 12(#12\nW=23, V=32\nU=32 = 32)

    8 -->|-B| 13(#13\nW=13, V=27\nU=29.25 = 27 + 9*0.25)
    13 -->|+C| 14(#14\nW=25, V=30\nU=30 = 30 + 22-25*0)
    14 -->|СТОП| 15(#15\n U=30)
    13 -->|-C| 16(#16\nW=13, V=27\nU=27 = 27)
    
    9 -->|+B| 17(#17\nW=18, V=27\nU=28 = 27 + 4*0.25)
    17 -->|+C| 18(#18\nU=27.5 = 27 + 22-30*0.25)
    17 -->|-C| 19(#19\nW=18, V=27\nU=27 = 27)
    
    9 -->|-B| 20(#20\nW=8, V=22\nU=25.5 = 22 + 14*0.25)

    5 -->|+F| 21(#21\nW=6, V=16\nU=32 = 16 + 16*1)
    21 -->|+A| 22(#22\nU=26.5)
    21 -->|-A| 23(#23\nU=24)
    
    5 -->|-F| 24(#24\nW=2, V=8\nU=28 = 8 + 20*1)
    
    3 -->|+E| 25(#25\nW=2, V=6\nU=46 = 6 + 20*2)
    25 -->|+F| 26(#26\nW=6, V=14\nU=30 = 14 + 16*1)
    
    3 -->|-E| 27(#27\nW=0, V=0\nU=44 = 22*2)
    
    style 19 fill:#9f9,stroke:#333,stroke-width:2px
```
### Ответ
- Наибольшая стоимость предметов в рюкзаке 27.
- Набор предметов, обеспечивающих максимальную стоимость, D, E, F, B общим весом 18.
- Свободное место в рюкзаке 4.
